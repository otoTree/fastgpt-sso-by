# FastGPT-SSO 快速定制开发指南

## 基本使用函数
```ts
getUserInfo: '获取用户信息',
redirectFn: '重定向函数',
getUserList: '获取用户列表',
getOrgList: '获取组织列表'
```

## 函数所返回的数据类型

```ts
export type RedirectFn = (data: {
  req: Request;
  redirect_uri: string; // 跳转链接
  state: string;
}) => Promise<{ redirectUrl: string }>;

export type GetUserInfoFn = (code: string ) => Promise<{
    // code入参是从对面来的，通过这个code请求身份认证的系统获得对应的信息
  username: string; //用户名，这个是唯一的，就是工号啊，id啥的
  avatar: string; // 头像
  contact: string; // 联系方式
  memberName?: string; // 成员名，这个建议留空，就是不要填写，被坑了好多次
}>;


export type UserListType = {
  username: string; // 用户名，这个是唯一的，就是工号啊，id啥的
  memberName: string; // 成员名
  avatar?: string; // 头像
  contact?: string; // 联系方式
  orgs?: string[];  // 所属组织
}[];

export type GetUserListFn = () => Promise<UserListType>;

export type OrgListType = {
  id: string;  // 组织id
  name: string;  // 组织名称
  parentId: string; //父组织id，当前组织为根组织的时候，这个必须为空，就是用''
}[];

export type GetOrgListFn = () => Promise<OrgListType>;
```

## 打包命令
```docker
# 构建你的 SSO 镜像
docker build --platform linux/amd64 -t fastgpt-sso:latest .
# 冒号后面是版本号

# 导出镜像
docker save -o fastgpt-sso-latest.tar fastgpt-sso:latest

```

## 注意事项
 - 官网有sso的时序图，可以查看
 - ?数据类型里面带个问号就是可以留空
 - 当对方是个傻逼，搞了很多个根组织出来的时候，就建立一个虚拟根组织
 - 用ai也能开发，不想开发了就把接口扣下来，告诉ai需要改哪个函数，使用哪个接口，就是这样
 - 用户单点登录的时候，成员名直接留空就好了，一般用户同步的时候已经同步过成员名了
 - 其他的就没什么了